<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <META http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>Ska Radios</title>
  <script type="text/javascript">
    const days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
    const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];

    function go() {
      const now = new Date();
      const formatter = new Intl.DateTimeFormat("en-GB", {
        timeZoneName: "short"
      });
      document.getElementById("timezone").innerHTML = formatter.formatToParts(now).find(p => p.type === "timeZoneName").value;
      document.getElementById("now").innerHTML = formatDate(now.getDay(), now.getDate(), now.getMonth(), now.getFullYear(), now.getHours(), now.getMinutes(), now.getSeconds()) + formatWeekInMonth(formatOrdinal(whichWeek(now.getDate())), now.getDay());
      document.getElementById("utc").innerHTML = formatDate(now.getUTCDay(), now.getUTCDate(), now.getUTCMonth(), now.getUTCFullYear(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds()) + formatWeekInMonth(formatOrdinal(whichWeek(now.getUTCDate())), now.getUTCDay());
      // hours are UTC times! day: 0 = Sunday
      document.getElementById("skapatrol").innerHTML = calcInnerHTML(1, 20, 22, 1, 1, 1, 1, 1);
      document.getElementById("rd").innerHTML = calcInnerHTML(3, 21, 22, 1 ,1 ,1 ,1 ,1);
      document.getElementById("fus").innerHTML = calcInnerHTML(5, 19, 20, 1, 0, 1, 1, 1);
      document.getElementById("freedom").innerHTML = calcInnerHTML(0, 21, 22, 0, 1, 0, 1, 0);
      setTimeout("go()", 1000);
    }

    // day: 0 = Sunday
    function calcInnerHTML(day, startHour, endHour, first, second, third, fourth, fifth) {
      // var weeks = [first, second, third, fourth, fifth];
      const now = new Date();
      const nowDayUTC = now.getUTCDay();
      const nowHourUTC = now.getUTCHours();
      let nowMinutesUTC = now.getUTCMinutes();
      const nowSecondsUTC = now.getUTCSeconds();
      // is the show on now?
      if ((nowDayUTC === day) && (nowHourUTC >= startHour) && (nowHourUTC < endHour)) {
        thisWeek = whichWeek(now.getDay());
        // if(weeks[thisWeek] == 1) {
        return '<span><b>now playing!</b></span>';
        // }
      }

      let secondsLeft = 60 - nowSecondsUTC;
      if (secondsLeft === 60) {
        secondsLeft = 0;
      } else {
        nowMinutesUTC += 1;
      }

      let minutesLeft = 60 - nowMinutesUTC;
      if (minutesLeft === 60) {
        minutesLeft = 0;
        //nowHourUTC += 1;
        // } else {
      }

      let daysLeft = day - nowDayUTC;
      if (daysLeft < 0) {
        daysLeft += 7;
      }

      let hoursLeft = startHour - nowHourUTC - 1;
      if (hoursLeft < 0) {
        hoursLeft += 24;
        // daysLeft -= 1;
      }
      //return 'startHour='+startHour+', nowHourUTC='+nowHourUTC;
      //return 'nowDayUTC='+nowDayUTC+', day='+day+", daysLeft="+daysLeft;
      //return 'day='+day+'nowDayUTC='+nowDayUTC+'nowHourUTC='+nowHourUTC + 'startHour='+startHour+'endHour='+endHour+formatRestDate(daysLeft, hoursLeft, minutesLeft, secondsLeft);
      return formatRestDate(daysLeft, hoursLeft, minutesLeft, secondsLeft);
    }

    function formatRestDate(days, hours, minutes, seconds) {
      let text = '';
      if (days === 1) {
        text =  "1 d, ";
      } else if (days > 1) {
        text += days + " d, ";
      }
      text += hours + ' h, '
      if (minutes < 10) { text += "0";}
      text += minutes + ' m, '
      if (seconds < 10) { text += "0";}
      return text + seconds + ' s';
    }

    function formatDate(day, date, month, year, hour, minute, second) {
      let text = days[day] + ', ' + date + '. ' + months[month] + ' ' + year + ', ';
      if (hour < 10) { text += "0";}
      text += hour + ':'
      if (minute < 10) { text += "0";}
      text += minute + ':'
      if (second < 10) { text += "0";}
      return text + second;
    }

    function whichWeek(day) {
      if (day < 8) return 1;
      if (day < 15) return 2;
      if (day < 22) return 3;
      if (day < 29) return 4;
      return 5;
    }

    function formatOrdinal(number) {
      if (number === 1) return "1<sup>st</sup>";
      if (number === 2) return "2<sup>nd</sup>";
      if (number === 3) return "3<sup>rd</sup>";
      return number + "<sup>th</sup>";
    }

    function formatWeekInMonth(whichWeek, day) {
      text = '<span class="small-text">';
      text += ' (' + whichWeek + ' ';
      text += days[day];
      text += ' this month)';
      text += '</span>';
      return text;
    }
  </script>
</head>

<body onload="go()">
<h1>Ska Radios of the world, unite!</h1>
<!-- No warranty, there may be minor errors... -->
The Facebook Group: <a target="_parent" href="https://www.facebook.com/groups/444399576124393/">Ska podcasts & radio shows</a>
<p/>
<table>
  <tr>
    <td>Local time (<span id="timezone"></span>):</td><td><span id="now"></span></td>
  </tr>
  <tr>
    <td><a target="_parent" href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC (GMT)</a>:</td><td><span id="utc"></span></td>
  </tr>
</table>
<br/>
<h2>FM Radio Shows</h2>
<table border="1">
  <tbody>
  <tr>
    <th class="header">Day</th>
    <th class="header">Recurrence</th>
    <th class="header">Programme</th>
    <th class="header">Station</th>
    <th class="header">Stream</th>
    <th class="header">Archive</th>
    <th class="header">time until next show</th>
    <td class="center nowrap">Vancouver<br/>Los Angeles<br/><span class="small-text">PST (UTC-8)</span></td>
    <td class="center nowrap">New York<br/>Kingston<br/><span class="small-text">EST (UTC-5)</span></td>
    <td class="center nowrap">London<br/>Dublin<br/><span class="small-text">GMT (UTC)</span></td>
    <td class="center nowrap">Stuttgart<br/>Skaska<br/><span class="small-text">CET (UTC+1)</span></td>
    <td class="center nowrap">St. Petersburg<br/>Москва<br/><span class="small-text">MSK (UTC+3)</span></td>
    <td class="center nowrap">Tokyo<br/>Perth<br/><span class="small-text">JST (UTC+9)</span></td>
    <td class="center nowrap">Melbourne<br/>Sydney<br/><span class="small-text">AEST (UTC+10)</span></td>
  </tr>
  <tr>
    <td class="top">Monday</td>
    <td class="top">weekly</td>
    <td class="top"><a target="_parent" href="https://skapatrol.weebly.com">Ska Patrol</a></td>
    <td class="top"><a target="_parent" href="https://nearfm.ie">NEAR fm 90.3</a></td>
    <td class="top"><a target="_parent" href="https://nearfm.ie/livestream/">nearfm.ie/livestream</a></td>
    <td class="top">-</td>
    <td class="top"><p style="text-align:center" id="skapatrol">
    <td class="center-top nowrap">12:00 - 14:00</td>
    <td class="center-top nowrap">15:00 - 17:00</td>
    <td class="center-top nowrap"><b>20:00 - 22:00</b></td>
    <td class="center-top nowrap">21:00 - 23:00</td>
    <td class="center-top nowrap">23:00 - 01:00</td>
    <td class="center-top nowrap">05:00 - 07:00<br/><span class="small-text">Tuesday</span></td>
    <td class="center-top nowrap">06:00 - 08:00<br/><span class="small-text">Tuesday</span></td>
  </tr>
  <tr>
    <td class="top">Wednesday</td>
    <td class="top">weekly</td>
    <td class="top"><a target="_parent" href="https://www.wueste-welle.de/sendung/view/id/81/Rudeboy-rsquo-s_Delight.html">Rudeboy's Delight</a></td>
    <td class="top"><a target="_parent" href="https://www.wueste-welle.de">Wüste Welle</a></td>
    <td class="top"><a target="_parent" href="https://www.wueste-welle.de/broadcasts/livestream/">Stream</a></td>
    <td class="top"><a target="_parent" href="https://www.wueste-welle.de/mediathek/viewsendung/id/78445">Mediathek</a></td>
    <td class="top"><p style="text-align:center" id="rd"></p></td>
    <td class="center-top nowrap">13:00 - 14:00</td>
    <td class="center-top nowrap">16:00 - 18:00</td>
    <td class="center-top nowrap">21:00 - 22:00</td>
    <td class="center-top nowrap"><b>22:00 - 23:00</b></td>
    <td class="center-top nowrap">00:00 - 01:00<br/><span class="small-text">Thursday</span></td>
    <td class="center-top nowrap">06:00 - 07:00<br/><span class="small-text">Thursday</span></td>
    <td class="center-top nowrap">07:00 - 08:00<br/><span class="small-text">Thursday</span></td>
  </tr>
  <tr>
    <td class="top">Friday</td>
    <td class="top">monthly</td>
    <td class="top"><a target="_parent" href="https://www.file-under-ska.de">File Under Ska</a></td>
    <td class="top"><a target="_parent" href="https://www.freies-radio.de">Freies Radio für Stuttgart</a></td>
    <td class="top"><a target="_parent" href="https://streaming.fueralle.org/frs-hi.mp3">Stream</a></td>
    <td class="top"><a target="_parent" href="https://www.freies-radio.de/mediathek">Mediathek</a></td>
    <td class="top"><p style="text-align:center" id="fus"></p></td>
    <td class="center-top nowrap">11:00 - 13:00</td>
    <td class="center-top nowrap">14:00 - 16:00</td>
    <td class="center-top nowrap">19:00 - 21:00</td>
    <td class="center-top nowrap"><b>20:00 - 22:00</b></td>
    <td class="center-top nowrap">22:00 - 24:00</td>
    <td class="center-top nowrap">04:00 - 06:00<br/><span class="small-text">Saturday</span></td>
    <td class="center-top nowrap">05:00 - 07:00<br/><span class="small-text">Saturday</span></td>
  </tr>
  <tr>
    <td class="top">Sunday<br/></td>
    <td class="top">2<sup>nd</sup>, 4<sup>th</sup></td>
    <!-- https://www.facebook.com/groups/387675204487 -->
    <td class="top"><a target="_parent" href="https://radioflora.de/shows/blue-beat-in-my-soul-ska-rocksteady-reggae-soul-from-the-60s-to-today/">Blue Beat in my Soul</a></td>
    <td class="top"><a target="_parent" href="https://radioflora.de">Radio Flora</a></td>
    <td class="top"><a target="_parent" href="https://radioflora.de">Stream</a></td>
    <td class="top"><a target="_parent" href="https://www.mixcloud.com/bluebeatshelter/">Mixcloud</a></td>
    <td class="top"><p style="text-align:center" id="freedom"></p></td>
    <td class="center-top nowrap">13 - 14</td>
    <td class="center-top nowrap">16 - 17</td>
    <td class="center-top nowrap">21 - 22</td>
    <td class="center-top nowrap"><b>20 - 22</b></td>
    <td class="center-top nowrap">00 - 01<br/><span class="small-text">Monday</span></td>
    <td class="center-top nowrap">06 - 07<br/><span class="small-text">Monday</span></td>
    <td class="center-top nowrap">07 - 08<br/><span class="small-text">Monday</span></td>
  </tr>
  </tbody>
</table>
<p>

<table id="radioTable">
  <thead>
  <tr>
    <th>Day</th>
    <th>Show</th>
    <th>Station</th>
    <th>time until next show</th>
    <th class="center nowrap">Vancouver<br/>Los Angeles<br/><span class="small-text">PST (UTC-8)</span></th>
    <th class="center nowrap">New York<br/>Kingston<br/><span class="small-text">EST (UTC-5)</span></th>
    <th class="center nowrap">London<br/>Dublin<br/><span class="small-text">GMT (UTC)</span></th>
    <th class="center nowrap">Stuttgart<br/>Skaska<br/><span class="small-text">CET (UTC+1)</span></th>
    <th class="center nowrap">St. Petersburg<br/>Москва<br/><span class="small-text">MSK (UTC+3)</span></th>
    <th class="center nowrap">Tokyo<br/>Perth<br/><span class="small-text">JST (UTC+9)</span></th>
    <th class="center nowrap">Melbourne<br/>Sydney<br/><span class="small-text">AEST (UTC+10)</span></th>
  </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
  // ---------------------------
  // Show data
  // ---------------------------
  const weeklySchedule = {
    0: [ // Monday
      {
        name: "Morning Ska",
        station: "M1",
        start: "08:00",
        end: "10:00",
        timezoneOffset: -5
      }
    ],
    1: [ // Tuesday
      {
        name: "Rocksteady Nights",
        station: "M2",
        start: "21:30",
        end: "23:00",
        timezoneOffset: 1
      }
    ],
    2: [], // Wednesday
    3: [ // Thursday
      {
        name: "Tokyo Groove",
        station: "M3",
        start: "18:00",
        end: "20:00",
        timezoneOffset: 9
      },
      {
        name: "Osaka Beat",
        station: "M4",
        start: "12:00",
        end: "24:00",
        timezoneOffset: 9
      }
    ],
    4: [], // Friday
    5: [ // Saturday
      {
        name: "Sydney Late Show",
        station: "M5",
        start: "22:15",
        end: "23:45",
        timezoneOffset: 10
      }
    ],
    6: []  // Sunday
  };

  // target timezones
  const targetZones = [
    { name: "PST", offset: -8 },
    { name: "EST", offset: -5 },
    { name: "GMT", offset: 0 },
    { name: "CET", offset: 1 },
    { name: "MSK", offset: 3 },
    { name: "JST", offset: 9 },
    { name: "AEST", offset: 10 }
  ];

  // --------------------------
  // Helper functions
  // --------------------------
  function getNextStart(show) {
    const now = new Date();
    const utcNow = now.getTime() + now.getTimezoneOffset() * 60000;

    const [h, m] = show.start.split(":").map(Number);

    const startUTC =
      new Date(utcNow)
        .setUTCHours(h - show.timezoneOffset, m, 0, 0);

    let nextStart = new Date(startUTC);

    if (nextStart.getTime() <= utcNow) {
      nextStart.setUTCDate(nextStart.getUTCDate() + 1);
    }

    return nextStart;
  }

  function formatDuration(ms) {
    const totalSeconds = Math.max(0, Math.floor(ms / 1000));
    const h = String(Math.floor(totalSeconds / 3600)).padStart(2, "0");
    const m = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, "0");
    const s = String(totalSeconds % 60).padStart(2, "0");
    return `${h}:${m}:${s}`;
  }

  // ---------------------------
  // Tabelle erzeugen
  // ---------------------------
  function renderTable() {
    const tbody = document.querySelector("#radioTable tbody");
    tbody.innerHTML = "";

    const now = new Date();
    const utcNow = now.getTime() + now.getTimezoneOffset() * 60000;

    const weekdays = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

    for (let day = 0; day <= 6; day++) {
      weeklySchedule[day].forEach(show => {
      const tr = document.createElement("tr");
      const nextStart = getNextStart(show);

      // Day
      const dayTd = document.createElement("td");
      dayTd.textContent = weekdays[day];
      tr.appendChild(dayTd);

      // Show
      const nameTd = document.createElement("td");
      nameTd.textContent = show.name;
      tr.appendChild(nameTd);

      // Station
      const stationTd = document.createElement("td");
      stationTd.textContent = show.station;
      tr.appendChild(stationTd);

      // Time until next show
      const waitTd = document.createElement("td");
      waitTd.textContent = "123";
      tr.appendChild(waitTd);

      // Zeitzonen
      targetZones.forEach(zone => {
        const localStart =
        nextStart.getTime() + zone.offset * 3600000;

        const remaining = localStart - (utcNow + zone.offset * 3600000);

        const td = document.createElement("td");
        td.textContent = formatDuration(remaining);
        tr.appendChild(td);
      });

      tbody.appendChild(tr);
      });
    }
  }

  renderTable();
  setInterval(renderTable, 1000);
</script>



  <!-- gone: www.upsettingstation.tk -->
Once a month: <a target="_parent" href="https://www.fsk-hh.org">Freies Sender-Kombinat Hamburg: SkaTime FS-Ska</a>
<p>
<h2>24/7 Streams</h2>
<table border="1">
  <tbody>
  <tr>
    <th class="header">Programme</th>
    <th class="header">Stream</th>
    <th class="header">Facebook</th>
  </tr>
  <tr>
    <td class="top"><a target="_parent" href="https://www.skaparade.com">Ska Parade</a></td>
    <td class="top"><a target="_parent" href="https://www.skaparade.com/play.pls">Stream</a></td>
    <td class="top"><a target="_parent" href="https://www.facebook.com/people/Ska-Parade/100068801391638/">Facebook</a></td>
  </tr>
  <tr>
    <td class="top"><a target="_parent" href="https://www.buttondownradio.com">Button Down Radio</a></td>
    <td class="top"><a target="_parent" href="https://www.buttondownradio.com">Stream</a></td>
    <td class="top"><a target="_parent" href="https://www.facebook.com/buttondownradio5446">Facebook</a></td>
  </tr>
  </tbody>
</table>
<p>
  <!--
      24/7: Easy Skanking <a target="_parent" href="http://www.easyskanking.tk/">Homepage</a> <a target="_parent" href="http://64.20.36.156:8003/listen.pls">Stream (Winamp)</a><br/>
  -->
<p>
<h2>Podcasts</h2>
<table border="1">
  <tbody>
  <tr>
    <th class="header">Programme</th>
    <th class="header">Homepage</th>
    <th class="header">Facebook</th>
    <th class="header">Spotify</th>
  </tr>
  <tr>
    <td class="top">Hornpod: A Ska Podcast</td>
    <td class="top"><a target="_parent" href="https://www.hornpod.org">hornpod.org</a></td>
    <td class="top"><a target="_parent" href="https://www.facebook.com/hornpod">facebook.com/hornpod</a></td>
    <td class="top"><a target="_parent" href="https://www.spotify.com/hornpod/">Check</a></td>
  </tr>
  <tr>
    <td class="top">Ska Nation Radio with Beefy</td>
    <td class="top"><a target="_parent" href="https://redcircle.com/shows/ska-nation-radio">redcircle.com/shows/ska-nation-radio</a></td>
    <td class="top"><a target="_parent" href="https://www.facebook.com/SkaNationRadio/">Facebook</a></td>
    <td class="top"><a target="_parent" href="https://www.spotify.com/skanation/">Check</a></td>
  </tr>
  </tbody>
</table>
<p>
<h2>Other</h2>
<ul>
  <li>Blue Beat & Ska <a target="_parent" href="https://www.mixcloud.com/bluebeatandska/">Mixcloud</a>, <a target="_parent" href="https://www.facebook.com/bluebeatandska">Facebook</a></li>
  <li>Offbeat, 2 hours of Ska, Rocksteady and Reggae <a target="_parent" href="https://www.facebook.com/RiverinaRudeboy">Facebook</a>
  <!--7pm on 96.7 2GHR in the Greater Hume and Albury Wodonga
      8pm on Triple AAA Fm in Wagga, Coolamon, Junee and Gundagai
      And online from those station's websites at those times, or via any good radio app.
   -->
  </li>
</ul>


</body>
</html>